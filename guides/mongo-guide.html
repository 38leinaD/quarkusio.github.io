<!DOCTYPE html>
<html>

<head>
  <title>Quarkus - Using the MongoDB Client</title>
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlightjs-pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='Content-Security-Policy' CONTENT="default-src 'none'; script-src 'self' 'unsafe-eval' 'sha256-ANpuoVzuSex6VhqpYgsG25OHWVA1I+F6aGU04LoI+5s=' 'sha256-ipy9P/3rZZW06mTLAR0EnXvxSNcnfSDPLDuh3kzbB1w=' js.bizographics.com https://www.redhat.com assets.adobedtm.com jsonip.com https://ajax.googleapis.com https://www.googletagmanager.com https://www.google-analytics.com https://use.fontawesome.com; style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; img-src 'self' *; media-src 'self' ; frame-src https://www.googletagmanager.com; frame-ancestors 'none'; base-uri 'none'; object-src 'none'; form-action 'none'; font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;">
  <META HTTP-EQUIV='X-Frame-Options' CONTENT="DENY">
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/assets/css/main.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="https://quarkus.io//feed.xml" title="Quarkus">
  <script src="https://quarkus.io//assets/javascript/goan.js" type="text/javascript"></script>
  <script src="https://quarkus.io//assets/javascript/hl.js" type="text/javascript"></script>
</head>

<body class="guides">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJWS5L"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div class="content">
    <div class="navigation-wrapper">
  <div class="width-12-12">
    <div class="header navigation">
      <div class="logo-wrapper">
        <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
      </div>
      <div class="nav-container">
        <nav>
          <div class="nav-mobile"><a id="nav-toggle" href="#!"><span></span></a></div>
          <ul class="nav-list">
            <li>
              <a href="/get-started/" class="">Get Started</a>
            </li>
            <li>
              <a href="/guides/" class="active">Guides</a>
            </li>
            <li>
              <a href="/extensions/" class="">Extensions</a>
            </li>
            <li>
              <a href="/community/" class="">Community</a>
            </li>
            <li>
              <a href="/blog/" class="">Blog</a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</div>

    <div class="guide">
  <div class="width-12-12">
    <h1 class="text-caps">Quarkus - Using the MongoDB Client</h1>
    <div class="hide-mobile toc">
      <ul class="sectlevel1">
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#architecture">Architecture</a></li>
<li><a href="#solution">Solution</a></li>
<li><a href="#creating-the-maven-project">Creating the Maven project</a></li>
<li><a href="#creating-your-first-json-rest-service">Creating your first JSON REST service</a></li>
<li><a href="#configuring-the-mongo-database">Configuring the mongo database</a></li>
<li><a href="#running-a-mongo-database">Running a Mongo Database</a></li>
<li><a href="#creating-a-frontend">Creating a frontend</a></li>
<li><a href="#reactive-mongodb-client">Reactive MongoDB Client</a></li>
<li><a href="#simplifying-mongodb-client-usage-using-bson-codec">Simplifying MongoDB Client usage using BSON codec</a></li>
<li><a href="#building-a-native-executable">Building a native executable</a></li>
<li><a href="#conclusion">Conclusion</a></li>
<li><a href="#connection-properties">Connection properties</a>
<ul class="sectlevel2">
<li><a href="#write-concern">Write concern</a></li>
<li><a href="#credentials">Credentials</a></li>
</ul>
</li>
</ul>
    </div>
    <div>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>MongoDB is a well known NoSQL Database that is widely used.</p>
</div>
<div class="paragraph">
<p>In this guide, we see how you can get your REST services to use the MongoDB database.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To complete this guide, you need:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>less than 15 minutes</p>
</li>
<li>
<p>an IDE</p>
</li>
<li>
<p>JDK 1.8+ installed with <code>JAVA_HOME</code> configured appropriately</p>
</li>
<li>
<p>Apache Maven 3.5.3+</p>
</li>
<li>
<p>MongoDB installed or Docker installed</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="architecture"><a class="anchor" href="#architecture"></a>Architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The application built in this guide is quite simple: the user can add elements in a list using a form and the list is updated.</p>
</div>
<div class="paragraph">
<p>All the information between the browser and the server are formatted as JSON.</p>
</div>
<div class="paragraph">
<p>The elements are stored in MongoDB.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="solution"><a class="anchor" href="#solution"></a>Solution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We recommend that you follow the instructions in the next sections and create the application step by step.
However, you can go right to the completed example.</p>
</div>
<div class="paragraph">
<p>Clone the Git repository: <code>git clone <a href="https://github.com/quarkusio/quarkus-quickstarts.git" class="bare">https://github.com/quarkusio/quarkus-quickstarts.git</a></code>, or download an <a href="https://github.com/quarkusio/quarkus-quickstarts/archive/master.zip">archive</a>.</p>
</div>
<div class="paragraph">
<p>The solution is located in the <code>mongo-client</code> <a href="https://github.com/quarkusio/quarkus-quickstarts/tree/master/using-mongodb-client">directory</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-the-maven-project"><a class="anchor" href="#creating-the-maven-project"></a>Creating the Maven project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, we need a new project. Create a new project with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="shell" class="language-shell hljs">mvn io.quarkus:quarkus-maven-plugin:0.19.1:create \
    -DprojectGroupId=org.acme \
    -DprojectArtifactId=using-mongodb-client \
    -DclassName="org.acme.rest.json.FruitResource" \
    -Dpath="/fruits" \
    -Dextensions="resteasy-jsonb,mongodb-client"</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command generates a Maven structure importing the RESTEasy/JAX-RS, JSON-B and MongoDB Client extensions.
After this, the quarkus-mongodb-client extension has been added to your <code>pom.xml</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-your-first-json-rest-service"><a class="anchor" href="#creating-your-first-json-rest-service"></a>Creating your first JSON REST service</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this example, we will create an application to manage a list of fruits.</p>
</div>
<div class="paragraph">
<p>First, let&#8217;s create the <code>Fruit</code> bean as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package org.acme.rest.json;

import java.util.Objects;

public class Fruit {

    private String name;
    private String description;

    public Fruit() {
    }

    public Fruit(String name, String description) {
        this.name = name;
        this.description = description;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    @Override
    public boolean equals(Object obj) {
        if (!(obj instanceof Fruit)) {
            return false;
        }

        Fruit other = (Fruit) obj;

        return Objects.equals(other.name, this.name);
    }

    @Override
    public int hashCode() {
        return Objects.hash(this.name);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nothing fancy. One important thing to note is that having a default constructor is required by the JSON serialization layer.</p>
</div>
<div class="paragraph">
<p>Now create a <code>org.acme.rest.json.FruitService</code> that will be the business layer of our application and store/load the fruits from the mongoDB database.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package org.acme.rest.json;

import com.mongodb.client.MongoClient;
import com.mongodb.client.MongoCollection;
import com.mongodb.client.MongoCursor;
import org.bson.Document;

import javax.enterprise.context.ApplicationScoped;
import javax.inject.Inject;
import java.util.ArrayList;
import java.util.List;

@ApplicationScoped
public class FruitService {

    @Inject MongoClient mongoClient;

    public List&lt;Fruit&gt; list(){
        List&lt;Fruit&gt; list = new ArrayList&lt;&gt;();
        MongoCursor&lt;Document&gt; cursor = getCollection().find().iterator();

        try {
            while (cursor.hasNext()) {
                Document document = cursor.next();
                Fruit fruit = new Fruit();
                fruit.setName(document.getString("name"));
                fruit.setDescription(document.getString("description"));
                list.add(fruit);
            }
        } finally {
            cursor.close();
        }
        return list;
    }

    public void add(Fruit fruit){
        Document document = new Document()
                .append("name", fruit.getName())
                .append("description", fruit.getDescription());
        getCollection().insertOne(document);
    }

    private MongoCollection getCollection(){
        return mongoClient.getDatabase("fruit").getCollection("fruit");
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, edit the <code>org.acme.rest.json.FruitResource</code> class as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Path("/fruits")
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public class FruitResource {

    @Inject FruitService fruitService;

    @GET
    public List&lt;Fruit&gt; list() {
        return fruitService.list();
    }

    @POST
    public List&lt;Fruit&gt; add(Fruit fruit) {
        fruitService.add(fruit);
        return list();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The implementation is pretty straightforward and you just need to define your endpoints using the JAX-RS annotations and use the <code>FruitService</code> to list/add new fruits.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-the-mongo-database"><a class="anchor" href="#configuring-the-mongo-database"></a>Configuring the mongo database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The main property to configure is the URL to access to MongoDB, almost all configuration can be included in the connection URI so we advise you to do so, you can find more information in the MongoDB documentation: <a href="https://docs.mongodb.com/manual/reference/connection-string/" class="bare">https://docs.mongodb.com/manual/reference/connection-string/</a></p>
</div>
<div class="paragraph">
<p>A sample configuration should look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs"># configure the mongoDB client for a replica set of two nodes
quarkus.mongodb.connection-string = mongodb://mongo1:27017,mongo2:27017</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, we are using a single instance running on localhost:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs"># configure the mongoDB client for a replica set of two nodes
quarkus.mongodb.connection-string = mongodb://localhost:27017</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you need more configuration properties, there is a full list at the end of this guide.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="running-a-mongo-database"><a class="anchor" href="#running-a-mongo-database"></a>Running a Mongo Database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As by default, <code>MongoClient</code> is configure to access a local Mongo database on port 27017 (the default MongoDB port), if you have a local running database on this port, there is nothing more to do before being able to test it!</p>
</div>
<div class="paragraph">
<p>If you want to use Docker to run a Mongo database, you can use the following command to launch one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="shell" class="language-shell hljs">docker run -ti --rm -p 27017:27017 mongo:4.0</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-a-frontend"><a class="anchor" href="#creating-a-frontend"></a>Creating a frontend</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now let&#8217;s add a simple web page to interact with our <code>FruitResource</code>.
Quarkus automatically serves static resources located under the <code>META-INF/resources</code> directory.
In the <code>src/main/resources/META-INF/resources</code> directory, add a <code>fruits.html</code> file with the content from this <a href="https://github.com/quarkusio/quarkus-quickstarts/blob/master/using-mongodb-client/src/main/resources/META-INF/resources/fruits.html">fruits.html</a> file in it.</p>
</div>
<div class="paragraph">
<p>You can now interact with your REST service:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>start Quarkus with <code>./mvnw compile quarkus:dev</code></p>
</li>
<li>
<p>open a browser to <code><a href="http://localhost:8080/fruits.html" class="bare">http://localhost:8080/fruits.html</a></code></p>
</li>
<li>
<p>add new fruits to the list via the form</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reactive-mongodb-client"><a class="anchor" href="#reactive-mongodb-client"></a>Reactive MongoDB Client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A reactive MongoDB Client is included in Quarkus.
Using it is as easy as using the classic MongoDB Client.
You can rewrite the previous example to use it like the following.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package org.acme.rest.json;

import io.quarkus.mongodb.ReactiveMongoClient;
import io.quarkus.mongodb.ReactiveMongoCollection;
import org.bson.Document;

import javax.enterprise.context.ApplicationScoped;
import javax.inject.Inject;
import java.util.List;
import java.util.concurrent.CompletionStage;

@ApplicationScoped
public class ReactiveFruitService {

    @Inject
    ReactiveMongoClient mongoClient;

    public CompletionStage&lt;List&lt;Fruit&gt;&gt; list(){
        return getCollection().find().map(doc -&gt; {
            Fruit fruit = new Fruit();
            fruit.setName(doc.getString("name"));
            fruit.setDescription(doc.getString("description"));
            return fruit;
        }).toList().run();
    }

    public CompletionStage&lt;Void&gt; add(Fruit fruit){
        Document document = new Document()
                .append("name", fruit.getName())
                .append("description", fruit.getDescription());
        return getCollection().insertOne(document);
    }

    private ReactiveMongoCollection&lt;Document&gt; getCollection(){
        return mongoClient.getDatabase("fruit").getCollection("fruit");
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package org.acme.rest.json;


import javax.inject.Inject;
import javax.ws.rs.*;
import javax.ws.rs.core.MediaType;
import java.util.List;
import java.util.concurrent.CompletionStage;

@Path("/reactive_fruits")
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public class ReactiveFruitResource {

    @Inject ReactiveFruitService fruitService;


    @GET
    public CompletionStage&lt;List&lt;Fruit&gt;&gt; list() {
        return fruitService.list();
    }

    @POST
    public CompletionStage&lt;List&lt;Fruit&gt;&gt;  add(Fruit fruit) {
        fruitService.add(fruit);
        return list();
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="simplifying-mongodb-client-usage-using-bson-codec"><a class="anchor" href="#simplifying-mongodb-client-usage-using-bson-codec"></a>Simplifying MongoDB Client usage using BSON codec</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By using a Bson <code>Codec</code>, the MongoDB Client will take care of the transformation of your domain object to/from a MongoDB <code>Document</code> automatically.</p>
</div>
<div class="paragraph">
<p>First you need to create a Bson <code>Codec</code> that will tell Bson how to transform your entity to/from a MongoDB <code>Document</code>.
Here we use a <code>CollectibleCodec</code> as our object is retrievable from the database (it has a MongoDB identifier), if not we would have used a <code>Codec</code> instead.
More information in the codec documentation: <a href="https://mongodb.github.io/mongo-java-driver/3.10/bson/codecs" class="bare">https://mongodb.github.io/mongo-java-driver/3.10/bson/codecs</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package org.acme.rest.json.codec;

import com.mongodb.MongoClient;
import org.acme.rest.json.Fruit;
import org.bson.*;
import org.bson.codecs.Codec;
import org.bson.codecs.CollectibleCodec;
import org.bson.codecs.DecoderContext;
import org.bson.codecs.EncoderContext;

import java.util.UUID;

public class FruitCodec implements CollectibleCodec&lt;Fruit&gt; {

    private final Codec&lt;Document&gt; documentCodec;

    public FruitCodec() {
        this.documentCodec = MongoClient.getDefaultCodecRegistry().get(Document.class);
    }

    @Override
    public void encode(BsonWriter writer, Fruit fruit, EncoderContext encoderContext) {
        Document doc = new Document();
        doc.put("name", fruit.getName());
        doc.put("description", fruit.getDescription());
        documentCodec.encode(writer, doc, encoderContext);
    }

    @Override
    public Class&lt;Fruit&gt; getEncoderClass() {
        return Fruit.class;
    }

    @Override
    public Fruit generateIdIfAbsentFromDocument(Fruit document) {
        if (!documentHasId(document)) {
            document.setId(UUID.randomUUID().toString());
        }
        return document;
    }

    @Override
    public boolean documentHasId(Fruit document) {
        return document.getId() != null;
    }

    @Override
    public BsonValue getDocumentId(Fruit document) {
        return new BsonString(document.getId());
    }

    @Override
    public Fruit decode(BsonReader reader, DecoderContext decoderContext) {
        Document document = documentCodec.decode(reader, decoderContext);
        Fruit fruit = new Fruit();
        if (document.getString("id") != null) {
            fruit.setId(document.getString("id"));
        }
        fruit.setName(document.getString("name"));
        fruit.setDescription(document.getString("description"));
        return fruit;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you need to create a <code>CodecProvider</code> to link this <code>Codec</code> to the <code>Fruit</code> class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package org.acme.rest.json.codec;

import org.acme.rest.json.Fruit;
import org.bson.codecs.Codec;
import org.bson.codecs.configuration.CodecProvider;
import org.bson.codecs.configuration.CodecRegistry;

public class FruitCodecProvider implements CodecProvider {
    @Override
    public &lt;T&gt; Codec&lt;T&gt; get(Class&lt;T&gt; clazz, CodecRegistry registry) {
        if (clazz == Fruit.class) {
            return (Codec&lt;T&gt;) new FruitCodec();
        }
        return null;
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quarkus takes care of registering the <code>CodecProvider</code> for you.</p>
</div>
<div class="paragraph">
<p>Finally, when getting the <code>MongoCollection</code> from the database you can use directly the <code>Fruit</code> class instead of the <code>Document</code> one, the codec will automatically map the <code>Document</code> to/from your <code>Fruit</code> class.</p>
</div>
<div class="paragraph">
<p>Here is an example of using a <code>MongoCollection</code> with the <code>FruitCodec</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package org.acme.rest.json;

import com.mongodb.client.MongoClient;
import com.mongodb.client.MongoCollection;
import com.mongodb.client.MongoCursor;

import javax.enterprise.context.ApplicationScoped;
import javax.inject.Inject;
import java.util.ArrayList;
import java.util.List;

@ApplicationScoped
public class CodecFruitService {

    @Inject MongoClient mongoClient;

    public List&lt;Fruit&gt; list(){
        List&lt;Fruit&gt; list = new ArrayList&lt;&gt;();
        MongoCursor&lt;Fruit&gt; cursor = getCollection().find().iterator();

        try {
            while (cursor.hasNext()) {
                list.add(cursor.next());
            }
        } finally {
            cursor.close();
        }
        return list;
    }

    public void add(Fruit fruit){
        getCollection().insertOne(fruit);
    }

    private MongoCollection&lt;Fruit&gt; getCollection(){
        return mongoClient.getDatabase("fruit").getCollection("fruit", Fruit.class);
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building-a-native-executable"><a class="anchor" href="#building-a-native-executable"></a>Building a native executable</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use the MongoDB client in a native executable.</p>
</div>
<div class="paragraph">
<p>If you want to use SSL/TLS encryption, you need to add these properties in your <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>quarkus.mongodb.tls=true
quarkus.mongodb.tls-insecure=true #only if TLS certificat cannot be validated</pre>
</div>
</div>
<div class="paragraph">
<p>You can then build a native executable with the usual command <code>./mvnw package -Pnative</code>.</p>
</div>
<div class="paragraph">
<p>Running it is as simple as executing <code>./target/using-mongodb-client-1.0-SNAPSHOT-runner</code>.</p>
</div>
<div class="paragraph">
<p>You can then point your browser to <code><a href="http://localhost:8080/fruits.html" class="bare">http://localhost:8080/fruits.html</a></code> and use your application.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Currently, Quarkus doesn&#8217;t support the <code>mongodb+srv</code> protocol in native mode.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion"><a class="anchor" href="#conclusion"></a>Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Accessing a Mongo database from a MongoDB Client is easy with Quarkus as it provides configuration and native support for it.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="connection-properties"><a class="anchor" href="#connection-properties"></a>Connection properties</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>quarkus.mongodb.connection-string</code></dt>
<dd>
<p>(e.g. <code>mongodb://mongo1:27017,mongo2:27017</code>)
MongoDB connection string, this is a URI where a lot of options can be passed : <a href="https://docs.mongodb.com/manual/reference/connection-string/" class="bare">https://docs.mongodb.com/manual/reference/connection-string/</a></p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.hosts</code></dt>
<dd>
<p>Comma separated list of hosts.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.application-name</code></dt>
<dd>
<p>Application name.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.max-pool-size</code></dt>
<dd>
<p>Maximum number of connections in the connection pool.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.min-pool-size</code></dt>
<dd>
<p>Minimum number of connections in the connection pool.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.max-connection-idle-time</code></dt>
<dd>
<p>Maximum idle time of a pooled connection. A connection that exceeds this limit will be closed.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.max-connection-life-time</code></dt>
<dd>
<p>Maximum life time of a pooled connection. A connection that exceeds this limit will be closed.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.wait-queue-timeout</code></dt>
<dd>
<p>The maximum wait time that a thread may wait for a connection to become available.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.maintenance-frequency</code></dt>
<dd>
<p>Configures the time period between runs of the maintenance job. Default is 0.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.maintenance-initial-delay</code></dt>
<dd>
<p>Configures period of time to wait before running the first maintenance job on the connection pool.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.wait-queue-multiple</code></dt>
<dd>
<p>This multiplier, multiplied with the <code>maxPoolSi</code> setting, gives the maximum number of threads that may be waiting for a connection to become available from the pool. All further threads will get an exception right away.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.connect-timeout</code></dt>
<dd>
<p>How long a connection can take to be opened before timing out.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.socket-timeout</code></dt>
<dd>
<p>How long a send or receive on a socket can take before timing out.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.tls-insecure</code></dt>
<dd>
<p>If connecting with TLS, this option enables insecure TLS connections. Default to false.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.tls</code></dt>
<dd>
<p>Whether to connect using TLS. Default to false.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.replica-set-name</code></dt>
<dd>
<p>Implies that the hosts given are a seed list, and the driver will attempt to find all members of the set.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.server-selection-timeout</code></dt>
<dd>
<p>How long the driver will wait for server selection to succeed before throwing an exception.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.local-threshold</code></dt>
<dd>
<p>When choosing among multiple MongoDB servers to send a request, the driver will only send that request to a server whose ping time is less than or equal to the server with the fastest ping time plus the local threshold.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.heartbeat-frequency</code></dt>
<dd>
<p>The frequency that the driver will attempt to determine the current state of each server in the cluster.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.read-preference</code></dt>
<dd>
<p>Configures the read preferences. Supported values are: <code>primary|primaryPreferred|secondary|secondaryPreferred|nearest</code></p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.max-wait-queue-size</code></dt>
<dd>
<p>Configures the maximum number of concurrent operations allowed to wait for a server to become available. All further operations will get an exception immediately.</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="write-concern"><a class="anchor" href="#write-concern"></a>Write concern</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>quarkus.mongodb.write-concern.safe</code></dt>
<dd>
<p>Configures the safety.
If set to <code>true</code> (the default): the driver ensures that all writes are acknowledged by the MongoDB server, or else throws an exception.
If set to <code>false</code>: the driver does not ensure that all writes are acknowledged by the MongoDB server.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.write-concern.journal</code></dt>
<dd>
<p>Configures the journal writing aspect.
If set to <code>true</code> (the default): the driver waits for the server to group commit to the journal file on disk.
If set to <code>false</code>: the driver does not wait for the server to group commit to the journal file on disk.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.write-concern.w</code></dt>
<dd>
<p>When set, the driver adds <code>w: wValue</code> to all write commands. It requires <code>safe</code> to be <code>true</code>.
The value is typically a number, but can also be the <code>majority</code> string.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.write-concern.retry-writes</code></dt>
<dd>
<p>If set to <code>true</code>, the driver will retry supported write operations if they fail due to a network error. The default is <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.write-concern.w-timeout</code></dt>
<dd>
<p>When set, the driver adds <code>wtimeout : ms</code>  to all write commands. It requires <code>safe</code> to be <code>true</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="credentials"><a class="anchor" href="#credentials"></a>Credentials</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>quarkus.mongodb.credentials.username</code></dt>
<dd>
<p>Configures the username.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.credentials.password</code></dt>
<dd>
<p>Configures the password.</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.credentials.auth-mechanism</code></dt>
<dd>
<p>Configures the authentication mechanism to use if a credential was supplied.
The default is unspecified, in which case the client will pick the most secure mechanism available based on the
sever version. For the GSSAPI and MONGODB-X509 mechanisms, no password is accepted, only the username.
Supported values: <code>MONGO-CR|GSSAPI|PLAIN|MONGODB-X509</code></p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.credentials.auth-source</code></dt>
<dd>
<p>Configures the source of the authentication credentials.
This is typically the database that the credentials have been created. The value defaults to the database
specified in the path portion of the connection string.
If the database is specified in neither place, the default value is <code>admin</code>. This option is only
respected when using the MONGO-CR mechanism (the default).</p>
</dd>
<dt class="hdlist1"><code>quarkus.mongodb.credentials.auth-mechanism-properties</code></dt>
<dd>
<p>Allows passing authentication mechanism properties.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
    </div>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. Quarkus and its extensions are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license.<br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a> is hosted on <a href='https://pages.github.com/' target='_blank'>Github Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links width-1-12">
          
            <li><a href="/">Home</a></li>
          
            <li><a href="/guides">Guides</a></li>
          
            <li><a href="/get-started">Get Started</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Contribute</span>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://twitter.com/quarkusio">Follow us</a></li>
          
            <li><a href="https://github.com/quarkusio">GitHub</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://quarkusio.zulipchat.com">Chatroom</a></li>
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev">Google&nbsp;Groups</a></li>
          
            <li><a href="/faq">FAQ</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-6-12 more-links">
        <span>Quarkus is proudly made of</span>
        <ul class="footer-links">
          
            <li><a href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
        </ul>
      </div>
    
  </div>
</div>
  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a>
      | <a href="https://www.redhat.com/en/about/privacy-policy">Red Hat Privacy Policy</a>
    </span>
    <span class="redhat">
      a Red Hat sponsored project   
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
</body>

</html>
